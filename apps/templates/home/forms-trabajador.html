{% extends "layouts/base.html" %} {% block title %} Formulario trabajadores {%
endblock %}

<!-- Element injected in the BODY element -->
{% block body_class %} sidebar-mini {% endblock body_class %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}

<!-- Google Font: Source Sans Pro -->
<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback"
/>
<!-- Font Awesome -->
<link
  rel="stylesheet"
  href="/static/assets/plugins/fontawesome-free/css/all.min.css"
/>
<!-- Theme style -->
<link rel="stylesheet" href="/static/assets/css/adminlte.min.css" />

{% endblock stylesheets %}{% block content %}

<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <section class="content-header">
    <!-- ... (encabezado del contenido) ... -->
  </section>

  <!-- Main content -->
  <section class="content">
    <div class="container-fluid">
      <div class="row">
        <!-- Formulario de Usuarios (izquierda) -->
        <div class="col-md-6">
          <div class="card card-primary">
            <div class="card-header">
              <h3 class="card-title">Formulario de Usuarios</h3>
            </div>
            <form id="formh-usuarios">
              <div class="card-body">
                <!-- Campos para el formulario de usuarios -->
                <div class="form-group">
                  <label for="id_usuario_rol">Rol</label>
                  <select class="form-control" id="id_usuario_rol" name="id_usuario_rol">
                    <!-- fetchData from roles dropdown -->
                  </select>
                </div>
                <div class="form-group">
                  <label for="usuario_nombres">Nombres</label>
                  <input
                    type="text"
                    class="form-control"
                    name="usuario_nombres"
                    placeholder="Ingrese sus nombres"
                  />
                </div>
                <div class="form-group">
                  <label for="usuario_apellidos">Apellidos</label>
                  <input
                    type="text"
                    class="form-control"
                    name="usuario_apellidos"
                    placeholder="Ingrese sus apellidos"
                  />
                </div>
                <div class="form-group">
                  <label for="id">DNI</label>
                  <input
                    type="number"
                    step="1"
                    class="form-control"
                    name="id"
                    id="dni"
                    placeholder="Ingrese su numero de DNI"
                  />
                </div>
                <div class="form-group">
                  <label for="usuario_telefono">Telefono</label>
                  <input
                    type="number"
                    class="form-control"
                    name="usuario_telefono"
                    placeholder="Ingrese su numero de telefono/celular"
                  />
                </div>
                <div class="form-group">
                  <label for="usuario_correo">Correo</label>
                  <input
                    type="email"
                    class="form-control"
                    name="usuario_correo"
                    placeholder="Ingrese su correo"
                  />
                </div>
                <div class="form-group">
                  <label for="usuario_contrasenia">Contraseña</label>
                  <div class="input-group">
                    <input
                      type="password"
                      class="form-control"
                      name="usuario_contrasenia"
                      placeholder="Ingrese contraseña"
                    />
                    <div class="input-group-append">
                      <span class="input-group-text">
                        <i class="fas fa-eye" id="togglePassword"></i>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card-footer">
                <button type="submit" class="btn btn-primary">
                  Guardar Usuario
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Formulario de Trabajadores (derecha) -->
        <div class="col-md-6">
          <div class="card card-primary">
            <div class="card-header">
              <h3 class="card-title">Formulario de Trabajadores</h3>
            </div>
            <form id="formh-trabajadores">
              <div class="card-body">
                <!-- Campos para el formulario de trabajadores -->
                <div class="form-group">
                  <label for="id">DNI</label>
                  <input
                    type="number"
                    step="1"
                    class="form-control"
                    name="usuario_relacionado"
                    id="dni-trabajadores"
                    placeholder="Ingrese su numero de DNI"
                  />
                </div>
                <div class="form-group">
                  <label for="trabajador_fecha_nacimiento">Fecha de Nacimiento</label>
                  <input
                    type="date"
                    class="form-control"
                    name="trabajador_fecha_nacimiento"
                  />
                </div>
                <div class="form-group">
                  <label for="trabajador_tipo_documento">Tipo de Documento</label>
                  <select class="form-control" name="trabajador_tipo_documento">
                    <option value="DNI" selected>DNI</option>
                    <option value="carnet_extranjeria">
                      Carnet de Extranjería
                    </option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="trabajador_path_documento">Documento de DNI (PDF)</label>
                  <input
                    type="file"
                    class="form-control-file"
                    name="trabajador_path_documento"
                  />
                </div>
                <div class="form-group">
                  <label for="trabajador_nacionalidad">Nacionalidad</label>
                  <input
                    type="text"
                    class="form-control"
                    name="trabajador_nacionalidad"
                    placeholder="Ingrese su nacionalidad"
                  />
                </div>
                <div class="form-group">
                  <label for="trabajador_sexo">Sexo</label>
                  <select class="form-control" name="trabajador_sexo">
                    </option>
                    <option value="No Especificado">No Especificado</option>
                    <option value="Femenino">Femenino</option>
                    <option value="Masculino">Masculino</option>
                  </select>
                </div>
                
                <div class="form-group">
                  <label for="trabajador_ubigeo">Ubigeo</label>
                  <input
                    type="text"
                    class="form-control"
                    name="trabajador_ubigeo"
                    placeholder="Ingrese Ubigeo"
                  />
                </div>
                <div class="form-group">
                  <label for="trabajador_estado_civil">Estado Civil</label>
                  <select class="form-control" name="trabajador_estado_civil">
                    <option value="no_especificado" selected>
                      No Especificado
                    </option>
                    <option value="No Especificado">No especificado</option>
                    <option value="Soltero">Soltero/a</option>
                    <option value="Casado">Casado/a</option>
                    <option value="Viudo">Viudo/a</option>
                    <option value="Divorciado">Divorciado/a</option>
                    <option value="Conviviente">Conviviente</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="trabajador_path_doc_estado_civil"
                    >Documento de Estado Civil (PDF)</label
                  >
                  <input
                    type="file"
                    class="form-control-file"
                    name="trabajador_path_doc_estado_civil"
                  />
                </div>
                <div class="form-group">
                  <label for="trabajador_fecha_ingreso">Fecha de Ingreso</label>
                  <input type="date" class="form-control" name="trabajador_fecha_ingreso" />
                </div>
                <div class="form-group">
                  <label for="trabajador_exp_previa">Experiencia Previa</label>
                  <input
                    type="number"
                    step="0.01"
                    class="form-control"
                    name="trabajador_exp_previa"
                    rows="3"
                    placeholder="Ingrese su experiencia previa"
                  ></textarea>
                </div>
              </div>
              <div class="card-footer">
                <button type="submit" class="btn btn-primary">
                  Guardar Trabajador
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Formulario de Estudio (tipo info) -->
        <div class="col-md-12">
          <div class="card card-secondary">
            <div class="card-header">
              <h3 class="card-title">Formulario de Estudio</h3>
            </div>
            <form id="formh-estudios">
              <div class="card-body">
                <!-- Campos para el formulario de estudio -->
                <div class="form-group">
                  <label for="trabajador">DNI</label>
                  <input
                    type="number"
                    step="1"
                    class="form-control"
                    name="trabajador"
                    id="dni-estudios"
                    placeholder="Ingrese su numero de DNI"
                  />
                </div>
                <div class="form-group">
                  <label for="trabajador_estado_civil">Estado Civil</label>
                  <select class="form-control" name="trabajador_estado_civil">
                    <option value="Habilitado">Habilitado</option>
                    <option value="No habilitado">No habilitado</option>
                    <option value="XXXXX">XXXXX</option>
                  </select>
                </div>
                ('Habilitado', 'Habilitado'),
            ('No habilitado', 'No habilitado'),
            ('XXXXX', 'XXXXX'),

                <div class="form-group">
                  <label for="nivelEducativo">Nivel Educativo</label>
                  <select class="form-control" id="nivelEducativo">
                    <option value="sin_educacion_formal">
                      Sin Educación Formal
                    </option>
                    <option value="educacion_especial_incompleta">
                      Educación Especial Incompleta
                    </option>
                    <option value="educacion_especial_completa">
                      Educación Especial Completa
                    </option>
                    <option value="educacion_primaria_incompleta">
                      Educación Primaria Incompleta
                    </option>
                    <option value="educacion_primaria_completa">
                      Educación Primaria Completa
                    </option>
                    <option value="educacion_secundaria_incompleta">
                      Educación Secundaria Incompleta
                    </option>
                    <option value="educacion_secundaria_completa">
                      Educación Secundaria Completa
                    </option>
                    <option value="educacion_tecnica_incompleta">
                      Educación Técnica Incompleta
                    </option>
                    <option value="educacion_tecnica_completa">
                      Educación Técnica Completa
                    </option>
                    <option value="educacion_superior_incompleta">
                      Educación Superior (Instituto Superior, etc) Incompleta
                    </option>
                    <option value="educacion_superior_completa">
                      Superior Completa (Instituto Superior)
                    </option>
                    <option value="educacion_universitaria_incompleta">
                      Educación Universitaria Incompleta
                    </option>
                    <option value="educacion_universitaria_completa">
                      Universitaria Completa
                    </option>
                    <option value="grado_de_bachiller">
                      Grado de Bachiller
                    </option>
                    <option value="titulado">Titulado</option>
                    <option value="estud_maestria_incompleta">
                      Estud. Maestría Incompleta
                    </option>
                    <option value="estud_maestria_completa">
                      Estud. Maestría Completa
                    </option>
                    <option value="grado_de_maestria">Grado de Maestría</option>
                    <option value="estudios_de_doctorado_incompleto">
                      Estudios de Doctorado Incompleto
                    </option>
                    <option value="estudios_de_doctorado_completo">
                      Estudios de Doctorado Completo
                    </option>
                    <option value="grado_de_doctor">Grado de Doctor</option>
                    <option value="no_especificado" selected>
                      No Especificado
                    </option>
                  </select>
                </div>

                <div class="form-group">
                  <label for="situacionEspecial">Situación Especial</label>
                  <input
                    type="text"
                    class="form-control"
                    id="situacionEspecial"
                    placeholder="Situación especial no especificada"
                  />
                </div>
                <div class="form-group">
                  <label for="regimenLaboral">Régimen Laboral</label>
                  <input
                    type="text"
                    class="form-control"
                    id="regimenLaboral"
                    placeholder="Régimen laboral no especificado"
                  />
                </div>
                <div class="form-group">
                  <label for="aseguramiento">Aseguramiento</label>
                  <input
                    type="text"
                    class="form-control"
                    id="aseguramiento"
                    placeholder="Aseguramiento no especificado"
                  />
                </div>
                <div class="form-group">
                  <label for="institucion">Institución</label>
                  <input
                    type="text"
                    class="form-control"
                    id="institucion"
                    placeholder="Institución no especificada"
                  />
                </div>
                <div class="form-group">
                  <label for="carreraEducativa">Carrera Educativa</label>
                  <input
                    type="text"
                    class="form-control"
                    id="carreraEducativa"
                    placeholder="Carrera no especificada"
                  />
                </div>
              </div>
              <div class="card-footer">
                <button type="submit" class="btn btn-secondary">
                  Guardar Datos de Estudio
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Para cargar desde CSV -->
        <div class="col-md-12">
          <div class="card card-secondary">
            <div class="card-header">
              <h3 class="card-title">Importar desde CSV</h3>
            </div>
            <div class="card-body">
              <p>
                También puede importar los datos desde un archivo CSV en el
                siguiente formato:
              </p>
              <p><strong>Ejemplo del formato CSV:</strong></p>
              <pre>
        "campo1","campo2","campo3"
        "valor1","valor2","valor3"
        "valor4","valor5","valor6"
              </pre>
              <div class="custom-file mt-3">
                <input
                  type="file"
                  class="custom-file-input"
                  id="csvFile"
                  accept=".csv"
                />
                <label class="custom-file-label" for="csvFile"
                  >Seleccionar archivo CSV</label
                >
              </div>
              <button
                type="button"
                class="btn btn-primary mt-3"
                onclick="importarCSV()"
              >
                Importar CSV
              </button>
              <div id="csvContent" class="mt-3"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

<!-- jQuery -->
<script src="/static/assets/plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="/static/assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- bs-custom-file-input -->
<script src="/static/assets/plugins/bs-custom-file-input/bs-custom-file-input.min.js"></script>
<!-- AdminLTE App -->
<script src="/static/assets/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="/static/assets/js/demo.js"></script>

<script src="/static/assets/js/index/apiUtils.js"></script>
<script src="/static/assets/js/forms/trabajador.js"></script>
<script>
  $(function () {
    bsCustomFileInput.init();
  });
</script>
<script>
  const togglePassword = document.getElementById("togglePassword");
  const password = document.getElementById("contrasena");

  togglePassword.addEventListener("click", function () {
    const type =
      password.getAttribute("type") === "password" ? "text" : "password";
    password.setAttribute("type", type);
    this.classList.toggle("fa-eye-slash");
  });
</script>
<script>
  function importarCSV() {
    const fileInput = document.getElementById("csvFile");
    const csvContentDiv = document.getElementById("csvContent");
    const file = fileInput.files[0];

    if (file) {
      const reader = new FileReader();
      reader.onload = function (e) {
        const csvContent = e.target.result;
        csvContentDiv.innerText = csvContent;
      };
      reader.readAsText(file);
    } else {
      csvContentDiv.innerText = "Por favor, seleccione un archivo CSV.";
    }
  }
</script>
{% endblock javascripts %}
